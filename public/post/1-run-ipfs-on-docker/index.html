<!DOCTYPE html>
<html>

<head>
  
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" href="../../css/ascii.css" />
<link rel="stylesheet" href="../../css/main.css" />
<link rel="icon" type="image/png" href="../../images/favicon.png">

<title>Run IPFS in a Docker container</title>
<meta name="description" content="" />
<meta name="author" content="" />

<meta property="og:type" content="website" />
<meta property="og:description" content="" />
<meta property="og:title" content="" />
<meta property="og:site_name" content="" />
<meta property="og:url" content="https://ipfs.io/post/1-run-ipfs-on-docker/" />
<meta property="og:locale" content="en_US">
<meta property="og:image" content="/img/ipld-logo.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="146" />
<meta property="og:image:height" content="166" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="" />
<meta name="twitter:title" content="" />
<meta name="twitter:creator" content="" />
<meta name="twitter:description" content="" />
<meta name="twitter:domain" content="" />
<meta name="twitter:image:src" content="/img/ipld-logo.png" />
<link href="" type="application/atom+xml" rel="alternate" title=" Full Atom Feed" />
<link href="" type="application/rss+xml" rel="alternate" title=" Full RSS Feed" />
<link href="" type="application/atom+xml" rel="alternate" title=" Atom Feed" />
<link href="" type="application/rss+xml" rel="alternate" title=" RSS Feed" />
<script src="//use.typekit.net/qbm6mtp.js"></script>
<script>
  try {
    Typekit.load({
      async: true
    });
  } catch (e) {}
</script>

  
  
</head>

<body>
  <section id="content" class="body blog">
    <header>
      <h2 class="entry-title">
        <a href="../../post/1-run-ipfs-on-docker/" rel="bookmark" title="Permalink to Run IPFS in a Docker container">Run IPFS in a Docker container</a></h2>
    </header>
    <footer class="post-info">
      <abbr class="published" title=" 11007-00-00T70:120 ">
      Wed 07 Jun 2015
    </abbr>
    
      <abbr class="modified" title=" 11007-00-00T70:120 ">
        2015-07-11 00:00:00 &#43;0000 UTC
      </abbr>
    
    
      <address class="vcard author">
        By Kyle Drake
        <a class="url fn" href="../../TODO">Kyle Drake</a>
      </address>
    
    </footer>
    
    <div class="entry-content">
      <p>In recent years, Docker and a few other projects have redefined how we run server applications. In the future, we might be running containerized apps in our personal devices. At its core, this fast-paced improvement is a combination of good interfaces to standardize how to do things, and great tooling to make using containers easy.</p>

<p>The IPFS Project has many things planned for the world of containers. The most interesting is using IPFS to distribute containers hyper efficiently across data-centers and the internet. We will be discussing many of these things in upcoming posts, but first things first. This post is a quick guide for running an IPFS node directly within Docker.</p>

<p>The IPFS team has provided an <a href="https://registry.hub.docker.com/u/ipfs/go-ipfs/">IPFS Docker image</a>, which is syncronized with the latest commits to <a href="https://github.com/ipfs/go-ipfs">go-ipfs</a>. It only takes a few commands to try it out!</p>

<pre><code class="language-sh">&gt; mkdir /tmp/ipfs-docker-staging
&gt; mkdir /tmp/ipfs-docker-data
&gt; docker run -d --name ipfs-node \
  -v /tmp/ipfs-docker-staging:/export -v /tmp/ipfs-docker-data:/data/ipfs \
  -p 8080:8080 -p 4001:4001 -p 127.0.0.1:5001:5001 \
  jbenet/go-ipfs:latest
faa8f714398c7a1a5a29adc2aed01857b41444ed53ec11863a3136ad37c8064c
</code></pre>

<p>Port <code>8080</code> is the HTTP Gateway, which allows you to query ipfs data with your browser (<a href="http://gateway.ipfs.io/ipfs/QmVyS3iAy7mvDA2HqQWm2aqZDcGDH3bCRLFkEutfBWNBqN/">see this example</a>), port <code>4001</code> is what swarm port IPFS uses to communicate with other nodes, and port <code>5001</code> is used for the local API. We bind <code>5001</code> only on <code>127.0.0.1</code> because it should not be exposed to the outside world. The <code>faa8f7143...</code> is the docker container id.</p>

<p>We&rsquo;ve mounted a data and staging volume. The <code>data</code> volume is used to store the IPFS local repo (config and database), and <code>staging</code> is a directory you can use for staging files for command line usage (such as <code>ipfs add</code>). If you&rsquo;re only using the API, you can omit the staging directory volume. And of course, feel free to put those directories somewhere other than <code>/tmp</code>.</p>

<p>Now what? Your node is running. You can issue commands directly to the containerized ipfs with <code>docker exec &lt;container-id&gt; &lt;ipfs-cmd&gt;</code>. For example, you can try <code>ipfs swarm peers</code> to see who you are connected to:</p>

<pre><code class="language-sh"># let's set $cid = &lt;container-id&gt; for easy access
&gt; cid=faa8f714398c7a1a5a29adc2aed01857b41444ed53ec11863a3136ad37c8064c
&gt; docker exec $cid ipfs swarm peers
/ip4/104.236.179.241/tcp/4001/ipfs/QmSoLpPVmHKQ4XTPdz8tjDFgdeRFkpV8JgYq8JVJ69RrZm
/ip4/128.199.219.111/tcp/4001/ipfs/QmSoLSafTMBsPKadTEgaXctDQVcqN88CNLHXMkTNwMKPnu
/ip4/162.243.248.213/tcp/4001/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm
/ip4/178.62.61.185/tcp/4001/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3
</code></pre>

<p>And of course, you can <code>add</code> or <code>cat</code> content as usual:</p>

<pre><code class="language-sh">&gt; echo &quot;hello from dockerized ipfs&quot; &gt;/tmp/ipfs-docker-staging/hello
&gt; docker exec $cid ipfs add /export/hello
added QmcDge1SrsTBU8b9PBGTGYguNRnm84Kvg8axfGURxqZpR1 /export/hello
&gt; docker exec $cid ipfs cat /ipfs/QmSvCqazpuuib8qyRyddyFemLc2qmRukLLy8YfkdRPEXoQ
hello there!
</code></pre>

<p>Your dockerized IPFS is now also running a Gateway at <code>http://&lt;ip-address-of-the-computer&gt;:8080</code>. You can try it out with <code>curl</code>, or with your browser:</p>

<pre><code class="language-sh">&gt; curl http://localhost:8080/ipfs/QmcDge1SrsTBU8b9PBGTGYguNRnm84Kvg8axfGURxqZpR1
hello from dockerized ipfs
</code></pre>

<p><a href="http://kuberneteslaunch.com">Kubernetes 1.0</a> comes out next week, so after that, we&rsquo;ll try using it to build a cluster of IPFS nodes that can store any kind of data and be able to retreive it from any other IPFS node. Not just with IPFS nodes in your cluster, but with everyone!</p>

<p><iframe src="../../static/run-ipfs-on-docker/index.html" style="width: 737px; height: 509px; overflow: hidden;" scrolling="no"></iframe>
<p class="powered">asciicast powered by <a href="https://asciinema.org/" target="_top">asciinema</a></p></p>

    </div>
    
  </section>
  <section>
    <section id="latest">
  <h2 class="content-center mb2">The Latest</h2>
  <div class="grid-flex-container">
    <div class="grid-flex-cell">
      <h5>IPFS Starlog</h5>
      <ol class="latest-list list-unstyled">
      
        <li><span class="date">1 June 2016</span> <a href="../../post/17-distributions/">IPFS distributions</a></li>
      
        <li><span class="date">8 May 2016</span> <a href="../../post/16-ipfs-weekly-10/">IPFS Weekly 10</a></li>
      
        <li><span class="date">20 April 2016</span> <a href="../../post/15-ipfs-weekly-9/">IPFS Weekly 9</a></li>
      
        <li><span class="date">7 April 2016</span> <a href="../../post/14-ipfs-0-4-0-released/">go-ipfs 0.4.0 has been released</a></li>
      
      </ol>
    </div>
    <div class="grid-flex-cell">
      <h5>Coverage</h5>
      <ol class="latest-list list-unstyled">
        <li><span class="publication">TechCrunch</span> <a href="http://techcrunch.com/2015/10/04/why-the-internet-needs-ipfs-before-its-too-late/">Why The Internet Needs IPFS Before It’s Too Late</a></li>
        <li><span class="publication">Motherboard</span> <a href="http://motherboard.vice.com/read/the-interplanetary-file-system-wants-to-create-a-permanent-web">IPFS Wants to Create a Permanent Web</a></li>
        <li><span class="publication">MakeUseOf</span> <a href="http://www.makeuseof.com/tag/goodbye-http-faster-safer-decentralized-internet-ipfs/">Faster, Safer, Decentralized Internet With IPFS</a></li>
      </ol>
    </div>
    <div class="grid-flex-cell grid-flex-cell-1of2">
      <h5>Videos</h5>
      <ul class="latest-videos list-unstyled cf">
        <li id="modal-nofooter">
          <a class="popup-youtube video-thumb" href="https://www.youtube.com/watch?v=8CMxDNuuAiQ">
            <img src="images/video-still-demo.png" />
          </a>
          <a class="popup-youtube" href="https://www.youtube.com/watch?v=8CMxDNuuAiQ">IPFS Demo</a>
        </li>
        <li>
          <a class="popup-youtube video-thumb" href="https://www.youtube.com/watch?v=HUVmypx9HGI">
            <img src="images/video-still-stanford-seminar.png" />
          </a>
          <a class="popup-youtube" href="https://www.youtube.com/watch?v=HUVmypx9HGI">The Distributed, Permanent Web</a>
        </li>
      </ul>
    </div>
  </div>
  <h4 class="content-center">Keep up with IPFS by <a href="https://tinyletter.com/ipfsnewsletter">joining our newsletter »</a></h4>
</section>

<script src="https://ipfs.io/ipfs/QmSb8577TaDYTN2Zo1bZ43PCUYfEneM2REuWZsDGtURLDn/"></script>
<script src="js/jquery.magnific-popup.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $('.popup-youtube').magnificPopup({
      disableOn: 700,
      type: 'iframe',
      mainClass: 'mfp-fade',
      removalDelay: 160,
      preloader: false,
      fixedContentPos: false
    });
  });
</script>

  </section>
</body>

</html>